---

- name: Create an Assisted Installer provisioned OpenShift Cluster on Libvirt/KVM
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    cluster_id: ""
    cluster_status: ""
    deployment_name: ""

  tasks:
    - name: Read in variables
      include_vars:
        dir: vars
        extensions:
          - 'yaml'
          - 'yml'

    - name: query API versions
      uri:
        url: "{{ assisted_service_endpoint }}/openshift_versions"
        return_content: yes
        method: GET
        status_code: 200
        body_format: json
        headers:
          Content-Type: application/json
      register: test_status

    - name: d
      debug:
        msg: "{{ (test_status.json).keys()|list }}"
      
    - name: inc
      include_tasks: tasks/ai_svc_query_openshift_versions.yaml